<?xml version="1.0" encoding="us-ascii"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.7 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY RFC2119 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC7250 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7250.xml">
<!ENTITY RFC5652 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5652.xml">
<!ENTITY I-D.ietf-anima-bootstrapping-keyinfra SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-anima-bootstrapping-keyinfra.xml">
<!ENTITY I-D.ietf-6tisch-dtsecurity-zerotouch-join SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-6tisch-dtsecurity-zerotouch-join.xml">
<!ENTITY RFC8138 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.8138.xml">
<!ENTITY I-D.ietf-ace-coap-est SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-ace-coap-est.xml">
<!ENTITY RFC3022 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3022.xml">
<!ENTITY RFC6690 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6690.xml">
<!ENTITY RFC7030 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7030.xml">
<!ENTITY RFC8366 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.8366.xml">
<!ENTITY I-D.richardson-anima-state-for-joinrouter SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.richardson-anima-state-for-joinrouter.xml">
<!ENTITY I-D.ietf-6tisch-minimal-security SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-6tisch-minimal-security.xml">
]>

<?rfc toc="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>

<rfc ipr="trust200902" docName="draft-richardson-anima-6tisch-stateless-ipip-proxy-00" category="std">

  <front>
    <title abbrev="stateless-ipip-proxy">Stateless IPIP proxy for Bootstrapping Protocols</title>

    <author initials="M." surname="Richardson" fullname="Michael Richardson">
      <organization>Sandelman Software Works</organization>
      <address>
        <email>mcr+ietf@sandelman.ca</email>
      </address>
    </author>

    <date year="2018" month="June" day="05"/>

    <area>Internet</area>
    <workgroup>anima Working Group</workgroup>
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>This document defines a mechanism for a Join Proxy used in a variety
of related enrollment protocols to forward arbitrary traffic in a
stateless fashion.</t>

<t>This mechanism uses IPIP encapsulation which can be compressed by
6lo mechanism.</t>



    </abstract>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>Enrollment of new nodes into constrained networks with constrained nodes
present unique challenges.</t>

<t>There are bandwidth and code space issues to contend.
Solutions such as <xref target="I-D.ietf-anima-bootstrapping-keyinfra"/>
and <xref target="I-D.ietf-6tisch-dtsecurity-zerotouch-join"/> require that a new
node (the "pledge") be helped by a Join Proxy.</t>

<t>The Join Proxy needs to forward traffic from the Pledge to the Join
Registrar/Coordinator (JRC), and then return responses from the JRC to the
Pledge.  As detailed in <xref target="I-D.richardson-anima-state-for-joinrouter"/>
there are many methods that can be used to forward the traffic.</t>

<t>In each of the two join scenarios, the traffic between the Pledge
and the Join Proxy is IPv6 Link-Local traffic.  The Pledge has no default
gateway, nor any global routable address.  The Pledge believes
a fiction that it has communicating with a JRC that is one link-local hop
away.  The fiction is created so that the not-yet-trustworthy Pledge is not
allocated any network resources, nor is it is permitted to communicate for
any purpose other than enrollment.</t>

<t>In all proxy mechanisms forwarding traffic to the JRC is relatively easy.
The traffic to the JRC appears to come from the Join Proxy, and
non-Link-Local addresses are used (ULA ACP addresses in ANIMA/BRSKI,
and GUA addresses in 6tisch, which has no ACP).</t>

<t>The problem is returning traffic from the JRC to the correct Pledge.
In general, there may be more than one Pledge active at any time, so some
state is necessary to find the correct Pledge for a given packet.</t>

<t>{{I-D.ietf-6tisch-minimal-security} defines the "Stateless-Proxy CoAP Option"
to store the state in the packet that is sent to the JRC.  This eliminates
the need to store any per-Pledge state in the Join Proxy.  This method
only works for CoAP protocols where the security is inside of CoAP
(i.e. OSCORE), and fails for CoAPS (CoAP/DTLS), as the new option can
not be inserted.</t>

<t><xref target="I-D.ietf-anima-bootstrapping-keyinfra"/> contains a mandatory to implement
(on the JRC!) use of a TCP circuit proxy.  In it's canonical 1990-era
application firewall origins in the ALG proxy, this requires a process
running on the Join Proxy that connects two TCP sockets together.  The NAPT
mechanisms as defined in <xref target="RFC3022"/> can be used for the same effect.  The
origin address (the Pledge's Link-Local address), is mapped to the Join
Proxy's ACP address.  A temporary origin port number is allocated.
The destination address is statically changed from the Join Proxy's
Link-Local address to the JRC's advertised address and port.  While this
NAT66 method is cheaper than the historical ALG, it still has per-Pledge
cost.  As the network on which device join may be open to any attacker,
it is quite reasonable to expect an attacker to attempt to overwhelm the Join
Proxy's state table.</t>

<t>This document provides a third option, IPIP encapsulation in which UDP
or TCP traffic (containing DTLS or TLS, or even raw CoAP) is forwarded
using the IPIP header to encapsulate the original packet, and therefore
maintaining the original headers.  This is essentially creation on a
specific purpose Virtual (overlay) Network between the Join Proxy
and the JRC.</t>

</section>
<section anchor="Terminology" title="Terminology">

<t>The following terms are defined in <xref target="RFC8366"/>, and are used
identically as in that document: artifact, imprint, domain, Join
Registrar/Coordinator (JRC), Manufacturer Authorized Signing Authority
(MASA), pledge, Trust of First Use (TOFU), and Voucher.</t>

</section>
<section anchor="rfc2119" title="Requirements Language">

<t>In this document, the key words "MUST", "MUST NOT", "REQUIRED",
"SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
and "OPTIONAL" are to be interpreted as described in BCP 14, RFC 2119
<xref target="RFC2119"/> and indicate requirement levels for compliant STuPiD
implementations.</t>

</section>
<section anchor="detailed-protocol-description" title="Detailed Protocol Description">

<t>TBD.</t>

</section>
<section anchor="design-considerations-for-server-implementation" title="Design Considerations for Server Implementation">

<t>TBD</t>

</section>
<section anchor="security-considerations" title="Security Considerations">

<t>TBD</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>TBD.</t>

</section>
<section anchor="acknowledgements" title="Acknowledgements">

<t>TBD.</t>

</section>
<section anchor="changelog" title="Changelog">

</section>


  </middle>

  <back>

    <references title='Normative References'>

&RFC2119;
&RFC7250;
&RFC5652;
&I-D.ietf-anima-bootstrapping-keyinfra;
&I-D.ietf-6tisch-dtsecurity-zerotouch-join;
&RFC8138;
&I-D.ietf-ace-coap-est;


    </references>

    <references title='Informative References'>

&RFC3022;
&RFC6690;
&RFC7030;
&RFC8366;
&I-D.richardson-anima-state-for-joinrouter;
&I-D.ietf-6tisch-minimal-security;


    </references>



  </back>

<!-- ##markdown-source:
H4sIAHn9FlsAA41YXXfbNhJ9x6/AOg+1z4qO42zcRE+r2E6qrr9qye3Zpz0Q
CUlYkwALgFbVHP/3vTMA9RHndJMX0SQwmI977wxSFIWIJtZ6KCdRRV3rEOT4
bnwnW+/+WMu58/KjczFEr9rW2IW88y660tVBqNnM66ehDP3GwrSmLXijqFxp
VQOzlVfzWHhTLpWvgrOFsqZRxVk0oVwW39pbnJwI8YrM2uo/qnYWVqLvtBCm
9fwY4unJyYeTU6G8VkM5tlF7q6NYLYaSzcvfnH8kbz9717XicbVdVFyQQ6JU
kTyvhChdhZVD2YVChdIY0ZqhxL9XslQWb7VU3qu1PDRzqeparnU4kkjLUoWl
XGqvhZTIyJA+4DE4H72ehyGbqPRcdXUMWNF/XzfpM/0pVBeXzg+FEIU0Fm+v
j+X9JldYnpJ4Ta90vf/JeXg9QZJ03cDTiZvHFRLCsdNJulGmHsqm9H83Os7/
Gfqlx6USwjrfqGie9BBL7z+dn7558yE//nj67iQ/vjt7d0qP4+LimIzk6s12
IVE86rWxc6/2FuYCVzHosvMmros/NUGnw8v/OmPzAe/fvH2/f0Cpi9KpttAh
Ii8w/JWjb09OT/Pj2dmH3tEfT972j+/fnp31Jl/gjgFXwCY7AXQAFd/yuzG0
vC567+FKURRSzSjsMgoxXZoggfKu0TZSnY3VQSrZaJxoTWiYO0r+jGOINCAT
sFShynj5pDwOWws3l17X8KiSGs7UNRtre4oRamAFVa0AwpnB0X4NAqj53JRs
SWwIJOfAo3H2OLu29QPHZk5rW6o2dDgQC+VqieQwyGdalq5pPczAk9lanNVu
a+A4hd6Yqqo1MRNU8q7qSrIixOXWcYRj9UpaV+FEY+F96SwlDLmp8CmuCJpy
ZeJy/wttEHQ+Wems+b2DR0uwTduFDhwSiCYJ3TOgeGUqWMADrFRahhagkSaE
TnPKYDpqWx2Lias7cjLIANhJFeSXL9+F5OdnQdZ3Vv8/OD8/o5K/dwYexqWK
qDEyISgweRiXWh60ta4W+uCIkr3UdcuJ3sNHCnMXMFbrag8Efenn3jWSzN6x
VVoS81ZxrxeGIvKvz53z0DYVAcTDn+/PjwacM6y0cDZ2nn5Ci/wgbxuTWJjt
iWT9WMoRoK4j5CQBOOXlu7iFTMZN7aA9a+AKkkdhUZoy+pgZu3HCjxwrsjK2
UivUD/DiDysn6QAZSm1BJBcGuxtgL640QtzmR+Swd3NriBNPZ/LK2MfiypWq
3pwo5XSbWsg88NkLuVggxJVaD/AO7EY4i9rNsJeiVbMacVYV8WjfyEzXRj8B
40riAGYfh28i2wf5GqAePYl6FtNDpTrwoiDRA2VNjtbs6NK1QsGLfEhvEgtL
NERSk+DSXgraulis0fi4cYKBcbnu/TIUWxQgGuzSPooo85Sw4Tpf6pCCxVrD
zrTaNybGVLGt65qqJ8hA2/nWoW86qjz5YXfULdWTGmmaMDYyE/rqUw76WvbA
Ri5wMmslOkG9BiACCDPdKfvOUrBZK5+1oNE72N7Un6kAftpiBwC5dqTjPoPy
8OFqJEfndzvfYGJ0M74evf54P/nXeMDg+vww2l+R9GKQRTaDCHaOMssRPNDS
pKiIirtRf4OLCMR7XcZcuWNK4kJb7VXN6Gd2rYlLjUsaZBk1udBoWcibJGFC
gaJp9IAwEpCd1EIYChrFDtxiQEWTObN/cO5qC1izErr7qKmiL4Xy6/75vGmR
rIabYbNIbDx3ozt52xKMDwRODzFFoWX2LtE5HbihBbeLbd2ZDngNsjUke+Ab
418nqCabDFDtixzOnvkdLc6mklgJZwG51LwofvZ226VXnH52NkfLZLHBQP0h
WrRcHJpjKOnt5Pz2/jIL8RyCujU4kYf08/piejWhBSlT1E8d54W0EoCNVGPY
1h4M3E/9X3c0bovotzyk4HhqC1xp06A3ETXFobN9Lv92xKMvvFdyCviXxped
iYm0yA7gZ+IPgZxyRP9avvnw4aQAHgVOrlnLYG2OhrgisjtvFnR2zvTo6nMy
ReBlDnDvJN/wmmAofGeZFO7r2uTO4SzwSpM12gF5GBxhg0i/0ESILI43o7up
2BEZFTIScyfLEyXlZ6cXUVG4oBi/pZ7PcVKyJ1IgPdlTc09YQjZeagkqSTAi
Rar22jSHgi072kKNVkbdtI7nvHwS/orSds1MswZvtDqpHwanSFinZPc+ETMA
a6oKYEuRLyiklyL4QxAvPd4hFNxT1ROQZign/XeCLjkFd39bYiTgCoqb0fTs
LPOFO9FSq7aXf7KHRUAcQwXVH1AzgeuABonjlpG4j4WYRo6E/9SMNvNqpZ8M
pj0eALLiuZa6vWNqqxhJI/xApGYFWIHf6IoYU7g/Y53+oyVBg1/9at4dKfWs
Jw4xg9R187JcSS+41R9/fQkAcp9MxSBGSjDGJOIOvjV8mz6eh4s7YIoR3Mv/
YWYqoZ/UgG6b+BnQrybd9WrFknFEEeauqSvRBW4icJkPRAGqFNr26CRTCVko
RNLTzViIiykkUuDeuDl/b3myGHpxJKkNpMEmAY1mD4rN8cUEOTYUTT8N/Gp8
7GDkkLJbq/WRvMm13R3YtuDcDm1Qdrp2TGnusK52i7Xc/Pvyauf1c+qtc4wa
bsXe41tq5l9zni6Jz88p8r7ZCxTP9rRRWasgNX2Bh1gZzRy9dECi6ZGlAT5S
ugbfMXtfK9vR5s6jKiO++Js/4dLELDjV+RWuhYfXo8kIO9KdYSCnNLmRFn8y
Hg8PyObh9PbTQ+4jv9ItBIJHSbpPQkruQo7A/E6hy3155ecl3fCfefqKu7BN
wzP6BDU4zOUH1w+T6cEg/cqbW36+v/zlYXx/eXEwEAeTn0ZXV/SSH/oVk59u
H64utk/bnee319eXNxeX/PF69O+DNDId3N5Nx7c3o6sDLgBgyo0NJcNFkGdR
UupQejNLdfsIirz5x4Cu+JJiEVxIjuqZ84CJJQ2ifpsEWYMxucvSHbc2Ci8n
0+7OXIhN52PcBk7gRX/P6f+jC2/IiTbddqcfL/KygLKBhdzlfTLAp0y0B8Dl
eM82b6R9k35C2N+5+T4e3Yy+9Y0PHZWP1q0YFFzg7ZdzFnlwQIj/AZdp7oHT
EwAA

-->

</rfc>

